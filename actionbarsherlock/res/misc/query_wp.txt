c1b58aa5-bb45-4eba-b741-b3a8b9a9ba94


02-17 11:39:36.448: I/dhara(6378): sql >>> 

Select CategoryMaster._id as _id, category_id,parent_id,category_name,category_name_lower,'' as item_name_lower,'' as item_name,'' as item_id,'' as item_code,'' as item_desc,'' as full_name,'' as item_price,'' as isactivated,'' as isrestricted,'' as have_modifiers from CategoryMaster where (category_id in ( Select parent_id from CategoryMaster where category_id in ( Select category_id from ItemMaster join SectionItemMaster on ItemMaster.item_id=SectionItemMaster.item_id where SectionItemMaster.section_id='c1b58aa5-bb45-4eba-b741-b3a8b9a9ba94' group by category_id )  and parent_id IS NOT NULL ) or category_id in (Select category_id from CategoryMaster where category_id in (Select category_id from ItemMaster join SectionItemMaster on ItemMaster.item_id=SectionItemMaster.item_id where SectionItemMaster.section_id='c1b58aa5-bb45-4eba-b741-b3a8b9a9ba94' group by category_id )))  and parent_id = '' or parent_id IS NULL 


CATEGORY

>>>>>>>



02-17 14:14:04.648: E/dhara(11767): sql >>>> select ItemMaster._id, ItemMaster.category_id,'' as parent_id,CategoryMaster.category_name,CategoryMaster.category_name_lower,item_name_lower,item_name,ItemMaster.item_id,item_code,item_desc,full_name,item_price,isactivated,isrestricted,have_modifiers from ItemMaster join CategoryMaster on ItemMaster.category_id = CategoryMaster.category_id and ( ItemMaster.item_name_lower like '%it%' or ItemMaster.item_desc like '%it%' or ItemMaster.full_name like '%it%' or CategoryMaster.category_name_lower like '%it%' )  join SectionItemMaster on ItemMaster.item_id = SectionItemMaster.item_id and SectionItemMaster.section_id ='c1b58aa5-bb45-4eba-b741-b3a8b9a9ba94' order by ItemMaster.isactivated DESC 




>>>> ALL ITEMS WITHOUT CATEGORIES

select ItemMaster._id, ItemMaster.category_id,'' as parent_id,CategoryMaster.category_name,CategoryMaster.category_name_lower,item_name_lower,item_name,ItemMaster.item_id,item_code,item_desc,full_name,item_price,isactivated,isrestricted,have_modifiers from ItemMaster ,CategoryMaster, SectionItemMaster where ( ItemMaster.item_name_lower like '%i%' or ItemMaster.item_desc like '%i%' or ItemMaster.full_name like '%i%' or CategoryMaster.category_name_lower like '%i%' )  and ItemMaster.item_id = SectionItemMaster.item_id and SectionItemMaster.section_id ='c1b58aa5-bb45-4eba-b741-b3a8b9a9ba94' group by ItemMaster._id order by ItemMaster.isactivated DESC 




>>>>>>>>>>>>>>>>>>>>>>>



select ItemMaster._id, ItemMaster.category_id,'' as parent_id,CategoryMaster.category_name,CategoryMaster.category_name_lower,item_name_lower,item_name,ItemMaster.item_id,item_code,item_desc,full_name,item_price,isactivated,isrestricted,have_modifiers from ItemMaster join CategoryMaster on ItemMaster.category_id = CategoryMaster.category_id and ( ItemMaster.item_name_lower like '%it%' or ItemMaster.item_desc like '%it%' or ItemMaster.full_name like '%it%' or CategoryMaster.category_name_lower like '%it%' )  join SectionItemMaster on ItemMaster.item_id = SectionItemMaster.item_id and SectionItemMaster.section_id ='c1b58aa5-bb45-4eba-b741-b3a8b9a9ba94' group by ItemMaster._id 

union 

select ItemMaster._id, ItemMaster.category_id,'' as parent_id,'' as category_name ,'' as category_name_lower,item_name_lower,item_name,ItemMaster.item_id,item_code,item_desc,full_name,item_price,isactivated,isrestricted,have_modifiers from ItemMaster join  SectionItemMaster on ItemMaster.item_id = SectionItemMaster.item_id and SectionItemMaster.section_id ='c1b58aa5-bb45-4eba-b741-b3a8b9a9ba94' and (ItemMaster.item_name_lower like '%it%' or ItemMaster.item_desc like '%it%' or ItemMaster.full_name like '%it%')
group by ItemMaster._id 

order by ItemMaster.isactivated DESC 



>>>>>>>>>>>>>>>>>>>>>>>>>

select ItemMaster._id, ItemMaster.category_id,'' as parent_id,'' as category_name ,'' as category_name_lower,item_name_lower,item_name,ItemMaster.item_id,item_code,item_desc,full_name,item_price,isactivated,isrestricted,have_modifiers from ItemMaster join  SectionItemMaster on ItemMaster.item_id = SectionItemMaster.item_id and SectionItemMaster.section_id ='c1b58aa5-bb45-4eba-b741-b3a8b9a9ba94' and (ItemMaster.item_name_lower like '%it%' or ItemMaster.item_desc like '%it%' or ItemMaster.full_name like '%it%')
group by ItemMaster._id 

order by ItemMaster.isactivated DESC 



>>>>>>>>>>>>>>>>>>>>>>>> FINAL QUERY


select _id, category_id, parent_id, category_name, category_name_lower, item_name_lower,item_name, item_id, item_code, item_desc, full_name, item_price
, isactivated, isrestricted, have_modifiers from (

select ItemMaster._id, ItemMaster.category_id,'' as parent_id,CategoryMaster.category_name,CategoryMaster.category_name_lower,item_name_lower,item_name,ItemMaster.item_id,item_code,item_desc,full_name,item_price,isactivated,isrestricted,have_modifiers from ItemMaster join CategoryMaster on ItemMaster.category_id = CategoryMaster.category_id and ( ItemMaster.item_name_lower like '%it%' or ItemMaster.item_desc like '%it%' or ItemMaster.full_name like '%it%' or CategoryMaster.category_name_lower like '%it%' )  join SectionItemMaster on ItemMaster.item_id = SectionItemMaster.item_id and SectionItemMaster.section_id ='c1b58aa5-bb45-4eba-b741-b3a8b9a9ba94' 

 union

select ItemMaster._id, ItemMaster.category_id,'' as parent_id,'' as category_name ,'' as category_name_lower,item_name_lower,item_name,ItemMaster.item_id,item_code,item_desc,full_name,item_price,isactivated,isrestricted,have_modifiers from ItemMaster join  SectionItemMaster on ItemMaster.item_id = SectionItemMaster.item_id and SectionItemMaster.section_id ='c1b58aa5-bb45-4eba-b741-b3a8b9a9ba94' and (ItemMaster.item_name_lower like '%it%' or ItemMaster.item_desc like '%it%' or ItemMaster.full_name like '%it%')

order by ItemMaster.isactivated DESC ) group by _id



>>>>>>> 19th Feb 2014

02-19 11:14:33.445: E/dhara(6599): modifiers query: 

select * from ModifiersMaster join ItemModifierMapping on ModifiersMaster.modifier_id = ItemModifierMapping.modifier_id join SectionItemMaster on SectionItemMaster.item_id = ItemModifierMapping.item_id and ItemModifierMapping.item_id ='fe0d42ff-9076-4600-b617-45ef1ca99dd9' and SectionItemMaster.section_id ='c1b58aa5-bb45-4eba-b741-b3a8b9a9ba94' and ItemModifierMapping.group_id='' and ModifiersMaster.group_id IS NULL  order by modifier_isactive DESC 



02-19 11:25:46.120: E/dhara(7718): group modifiers :

 select * from ItemModifierMapping join GroupModifiersMaster on ItemModifierMapping.group_id = GroupModifiersMaster.group_id and (ItemModifierMapping.modifier_id = '' or ItemModifierMapping.modifier_id IS NULL) and ItemModifierMapping.item_id = 'fe0d42ff-9076-4600-b617-45ef1ca99dd9'



02-19 11:26:47.310: E/dhara(7718): group modifiers : select * from ItemModifierMapping join GroupModifiersMaster on ItemModifierMapping.group_id = GroupModifiersMaster.group_id and (ItemModifierMapping.modifier_id = '' or ItemModifierMapping.modifier_id IS NULL) and ItemModifierMapping.item_id = '1424bc79-0202-db12-0137-ff1c5645a69e'


>>>



02-19 11:46:41.930: E/dhara(7718): modifiers query: select * from ModifiersMaster join ItemModifierMapping on ModifiersMaster.modifier_id = ItemModifierMapping.modifier_id join SectionItemMaster on SectionItemMaster.item_id = ItemModifierMapping.item_id and ItemModifierMapping.item_id ='9ec7c951-6963-4480-80b5-2b9def63864e' and SectionItemMaster.section_id ='c1b58aa5-bb45-4eba-b741-b3a8b9a9ba94' and ItemModifierMapping.group_id='' and ModifiersMaster.group_id IS NULL  order by modifier_isactive DESC 
02-19 11:46:41.930: E/dhara(7718): group modifiers : select * from ItemModifierMapping join GroupModifiersMaster on ItemModifierMapping.group_id = GroupModifiersMaster.group_id and (ItemModifierMapping.modifier_id = '' or ItemModifierMapping.modifier_id IS NULL) and ItemModifierMapping.item_id = '9ec7c951-6963-4480-80b5-2b9def63864e'
02-19 11:46:41.985: E/dhara(7718): count of group: 1



2ce1b5c5-119a-42cf-8055-5dd4d378ae4f


02-19 12:26:24.715: E/dhara(13067): modifiers query: select * from ModifiersMaster join ItemModifierMapping on ModifiersMaster.modifier_id = ItemModifierMapping.modifier_id join SectionItemMaster on SectionItemMaster.item_id = ItemModifierMapping.item_id and ItemModifierMapping.item_id ='9ec7c951-6963-4480-80b5-2b9def63864e' and SectionItemMaster.section_id ='c1b58aa5-bb45-4eba-b741-b3a8b9a9ba94' order by modifier_isactive DESC 
02-19 12:26:24.715: E/dhara(13067): group modifiers : select * from ItemModifierMapping join GroupModifiersMaster on ItemModifierMapping.group_id = GroupModifiersMaster.group_id and (ItemModifierMapping.modifier_id = '' or ItemModifierMapping.modifier_id IS NULL) and ItemModifierMapping.item_id = '9ec7c951-6963-4480-80b5-2b9def63864e'







>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>.



select * from ModifiersMaster join ItemModifierMapping on ModifiersMaster.modifier_id = ItemModifierMapping.modifier_id join SectionItemMaster on SectionItemMaster.item_id = ItemModifierMapping.item_id and ItemModifierMapping.item_id ='fe0d42ff-9076-4600-b617-45ef1ca99dd9' and SectionItemMaster.section_id ='c1b58aa5-bb45-4eba-b741-b3a8b9a9ba94' order by modifier_isactive DESC  



select * from ItemModifierMapping join GroupModifiersMaster on ItemModifierMapping.group_id = GroupModifiersMaster.group_id and (ItemModifierMapping.modifier_id = '' or ItemModifierMapping.modifier_id IS NULL) and ItemModifierMapping.item_id = 'fe0d42ff-9076-4600-b617-45ef1ca99dd9'







0e1c5ad7-74da-4557-0135-764254660a74 - mid
0e1c5ad7-74da-4557-0135-764254660228 - gid


>>>>>  

SELECT DISTINCT COALESCE(t1.id, t2.id) id,
       COALESCE(t1.name, t2.name) name
  FROM 
(
  SELECT TABLE_NAME <> 'table1' n
    FROM INFORMATION_SCHEMA.TABLES
   WHERE TABLE_SCHEMA = SCHEMA()
     AND TABLE_NAME IN('table1', 'table2')
) t LEFT JOIN table1 t1 
    ON t.n = 0 LEFT JOIN table2 t2
    ON t.n = 1 

